{% extends "base.html" %}

{% block content %}

<div class="container">
    <br>
    <div class="row">
        <div class="col ms-3 me-3 mb-3 text-center border rounded"><br>
            <h3>Профиль</h3>
            <ul class="list-group">
                <li class="list-group-item">{{ user.name }}</li>
                <li class="list-group-item">
                    {% if user.ban == 1 %}
                        <span class="badge text-bg-warning">Забанен</span>
                    {% elif user.admin == 0 %}
                        <span class="badge text-bg-secondary">Пользователь</span>
                    {% elif user.admin == 1 %}
                        <span class="badge text-bg-primary">Модератор</span>
                    {% elif user.admin == 2 %}
                        <span class="badge text-bg-danger">Администратор</span>
                    {% elif user.admin == 3 %}
                        <span class="badge text-bg-info">Владелец</span>
                    {% endif %}
                </li>
                {% if not current_user.is_anonymous and user.id == current_user.id %}
                    <li class="list-group-item">
                        <a href="{{ url_for('main.profile_settings') }}" class="btn border rounded" style="width: 100%;">Настройки</a>
                        {% if user.ban != 1 %}
                            <hr>
                            <a href="{{ url_for('post.create') }}" class="btn border rounded" style="width: 100%;">Создать пост</a>
                        {% endif %}
                    </li>
                {% endif %}
            </ul>
            ID: {{ user.id }}
        </div>
        <div class="col ms-3 me-3 mb-3 border rounded"><p>
            {% if user.admin >= 2 and user.ban != 1 %}
                {% for line in user.description.split("\n") %}
                    {{ line | safe }}<br>
                {% endfor %}
            {% else %}
                {% for line in user.description.split("\n") %}
                    {{ line }}<br>
                {% endfor %}
            {% endif %}
        </p></div>
    </div>
    <br>
    <div class="my-3 p-3 bg-body rounded shadow-sm">
        <h6 class="border-bottom pb-2 mb-0">Активные публикации</h6>
        {% for post in posts %}
        <div class="d-flex text-body-secondary pt-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-person-circle flex-shrink-0 me-2" viewBox="0 0 16 16" dy=".3em">
                <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zm-5-.5H7a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1 0-1zm0 3h7a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"/>
                <title>{{ user.name }}</title>
            </svg>
            <p class="pb-3 mb-0 small lh-sm border-bottom text-truncate">
                <strong class="d-block text-gray-dark"><a href="/post/{{ post['id'] }}">{{ post["title"] }}</a></strong>
                {{ post["content"] }}
            </p>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}